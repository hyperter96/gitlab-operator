---
apiVersion: apps.gitlab.com/v1beta1
kind: GitLab
metadata:
  name: gitlab
spec:
  chart:
    version: CHART_VERSION
    values:
      global:
        hosts:
          domain: DOMAIN
          hostSuffix: HOSTSUFFIX
        ingress:
          # Use the CI's NGINX ingress controller
          class: nginx
          tls:
            secretName: TLSSECRETNAME
      # TODO: properly set TargetPort for Gitaly metrics service port,
      # or remove the Gitaly metrics service port completely.
      gitlab:
        gitaly:
          metrics:
            enabled: false
      # Disable the bundled NGINX since we're using CI's NGINX ingress controller
      nginx-ingress:
        enabled: false
